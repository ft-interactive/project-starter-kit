machine:
  timezone: Europe/London
  node:
    version: 6.3.1

dependencies:
  cache_directories:
    - bower_components
    - node_modules
  override:
    - npm install
    - npm install -g accesslint-cli
    - gem install accesslint-ci
  pre:
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get update
    - sudo apt-get install -y libstdc++-4.9-dev

test:
  post:
    - npm run preflight
    - npm run build
    - npm run test:a11y
    - accesslint-ci scan http://localhost:3000

deployment:
  s3: # this is just a custom name, could be anything
    branch: /.*/
    commands:
      - npm run deploy:confirm

general:
  artifacts:
    - dist
